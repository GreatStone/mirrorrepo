#include <stdio.h>#include <string.h>#include <stdlib.h>#include "que.h"/************pop by GreatStone   2014.04.01    note: return strictly when queue is emptyreturn: int (0 fail, id)args:   que* q, int size************/void init (queue* q){    q->head = (node*) malloc (sizeof (node));    q->tail = (node*) malloc (sizeof (node));    q->head->ppre = q->tail->pnext = NULL;    q->head->pnext = q->tail;    q->tail->ppre = q->head;    q->size = 0;}void push (queue* q, char* source){    node* insert = (node*) malloc (sizeof(node));    q->tail->ppre->pnext = insert;    insert->ppre = q->tail->ppre;    q->tail->ppre = insert;    insert->pnext = q->tail;    strcpy(insert->id,source);    q->size++;}int pop (queue* q, char* save){    if (q->size == 0)    {        save[0] = 0;        return 0;    }    else    {        q->tail->ppre = q->tail->ppre->ppre;        strcpy(save,q->tail->ppre->pnext->id);        free(q->tail->ppre->pnext);        q->tail->ppre->pnext = q->tail;    }
    return 1;}